FROM node:alpine

WORKDIR /rcp-memcache
COPY memcache memcache/
COPY common common/
COPY tsconfig.json .

RUN npm i -g typescript ts-node
RUN cd common && yarn build && yarn link

ENV RCP_INTERNAL_USER="aW50ZXJuYWxAcmVjaXBpZWNlLm9yZy5pbnRlcm5hbEByZWNpcGllY2Uub3JnLjA="

ENTRYPOINT cd memcache && yarn link recipiece-common && yarn run-dev
